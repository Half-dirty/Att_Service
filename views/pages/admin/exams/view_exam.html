<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../style/style.css">
    <link rel="stylesheet" href="../../style/admin/global.css">
    <link rel="stylesheet" href="../../style/admin/exams.css">
    <title>Просмотр экзамена</title>
</head>
<header class="header">
    <div class="header__container">

        <!-- Логотип -->
        <a class="header__logo" href="/">
            <img class="header__logo-img" src="../../../pictures/logo.svg" alt="Logo" />
            <div class="header__logo-text__container">
                <h2 class="header__logo-text">Аттестация переводчиков русского жестового языка</h2>
            </div>
        </a>

        {{if ne .role "admin"}}
        <!-- Профиль пользователя (только если НЕ админ) -->
        <div class="header__profile">
            <div class="header__profile-info">
                <div class="header__status">
                    <h2>Статус:</h2>
                    {{if or (eq .status "pending") (eq .status "")}}
                    <h2 class="header__status-text header__status-text--inactive">Не подтвержден</h2>
                    <a href="#" class="header__status-button popup__link" name="aplication_form">Отправить на
                        проверку</a>
                    {{end}}
                    {{if eq .status "declined"}}
                    <a href="#" class="header__status-button aproove_form" name="aproove_form">Отказ</a>
                    <a href="#" class="header__status-button popup__link" name="aplication_form">Отправить на
                        проверку</a>
                    {{end}}
                    {{if eq .status "approved"}}
                    <h2 class="header__status-text header__status-text--active">Подтвержден</h2>
                    {{end}}
                </div>

                <div class="header__role">
                    <h2>Роль:</h2>
                    {{if eq .role "student"}}
                    <h2 class="header__role-text header__role-text--student">Аттестуемый</h2>
                    {{else if eq .role "examiner"}}
                    <h2 class="header__role-text header__role-text--examiner">Экзаменатор</h2>
                    {{end}}
                </div>
            </div>

            <img class="header__profile-avatar"
                src="{{if .avatar}}{{.avatar}}{{else}}../pictures/Generic avatar.png{{end}}" alt="Profile Avatar">
        </div>
        {{end}}

        <!-- Бургер меню -->
        <input type="checkbox" id="menu-toggle" class="header__menu-toggle">
        <label for="menu-toggle" class="header__menu-icon">
            <span></span>
        </label>

    </div> <!-- конец header__container -->
</header>


<main class="main main--admin">
    {{if eq .role "admin"}}
    <!-- Блок для администратора -->
    <nav class="menu">
        <ul class="menu__list">
            <!-- <li class="menu__item">
                <a href="/admin/exam/list" class="menu__button">Прошедшие экзамены</a>
            </li>
            <li class="menu__item">
                <a href="/admin/exam/planning" class="menu__button">Запланированные экзамены</a>
            </li>
            <li class="menu__item">
                <a href="/admin/exam/scheduled" class="menu__button">Назначенные экзамены</a>
            </li> -->
            <li class="menu__item--back">
                <a href="/admin/exam/scheduled">назад</a>
            </li>
        </ul>
    </nav>

    {{else}}
    <!-- Блок для студента или экзаменатора -->

    <nav class="menu">
        <ul class="menu__list">
            <!-- <li class="menu__item {{if eq .path " /user/profile"}}menu__item--active{{end}}">
                <a href="/user/profile" class="menu__button">Личные данные</a>
            </li>
            <li class="menu__item {{if eq .path " /user/document"}}menu__item--active{{end}}">
                <a href="/user/document" class="menu__button">Документы</a>
            </li>

            {{if or (eq .status "pending") (eq .status "") (eq .status "declined")}}
            <li class="menu__item menu__item--disabled">
                <a href="#" class="menu__button popup__link" name="aplication_form">Мои заявления</a>
            </li>
            {{end}}

            {{if eq .status "approved"}}
            <li class="menu__item {{if eq .path " /user/application"}}menu__item--active{{end}}">
                <a href="/user/application" class="menu__button">Мои заявления</a>
            </li>
            {{end}}

            <li class="menu__item {{if eq .path " /user/exams"}}menu__item--active{{end}}">
                <a href="/user/exams" class="menu__button">Назначенные экзамены</a>
            </li>
            <li class="menu__item {{if eq .path " /user/settings"}}menu__item--active{{end}}">
                <a href="/user/settings" class="menu__button">Настройки</a>
            </li> -->
            <li class="menu__item--back">
                <a href="/user/exams">назад</a>
            </li>
        </ul>
    </nav>
    {{end}}

    <section class="profile">
        <div class="profile__params">
            <div class="profile__params-item">
                <div class="profile__item-part">
                    <label class="profile__params-label" for="exam_date">Дата проведения экзамена:</label>
                    <input class="profile__params-input" type="date" name="exam_date" id="exam_date"
                        value="{{.exam_date}}" readonly>
                </div>
                <div class="profile__item-part">
                    <label class="profile__params-label" for="exam_code">Код экзамена:</label>
                    <input class="profile__params-input" type="text" name="exam_code" id="exam_code"
                        value="{{.ExamCode}}" readonly>
                </div>
            </div>
            <div class="profile__params-item">
                <div class="profile__item-part">
                    <label class="profile__params-label" for="commission_start">Начало действия
                        комиссии:</label>
                    <input class="profile__params-input" type="date" name="commission_start" id="commission_start"
                        value="{{.commission_start}}" readonly>
                </div>
                <div class="profile__item-part">
                    <label class="profile__params-label" for="commission_end">Конец действия комиссии:</label>
                    <input class="profile__params-input" type="date" name="commission_end" id="commission_end"
                        value="{{.commission_end}}" readonly>
                </div>
            </div>

            <div class="profile__people">
                <div class="profile__people-examiner">
                    <div class="profile__people-header">
                        <label for="examiner-input">Экзаменаторы:</label>
                    </div>
                    {{range .Examiners}}
                    <div class="profile__examiner-item" data-id="{{.ID}}">
                        <img class="profile__avatar-mini" src="{{.Avatar}}" alt="Аватар">
                        <div class="profile__user-name">{{.Name}}</div>
                        <div class="profile__examiner-checked">
                            <div class="profile__menu-icon {{if .Selected}}active{{end}}"></div>
                            <select class="profile__examiner-role" name="examiner_role_{{.ID}}" disabled>
                                <option value="chair" {{if eq .Role "chair" }}selected{{end}}>Председатель
                                </option>
                                <option value="secretary" {{if eq .Role "secretary" }}selected{{end}}>Секретарь
                                </option>
                                <option value="examiner" {{if eq .Role "examiner" }}selected{{end}}>Экзаменатор
                                </option>
                            </select>
                        </div>
                    </div>
                    {{end}}
                </div>

                <div class="profile__people-student">
                    <div class="profile__people-header">
                        <label for="student-input">Экзаменуемые:</label>
                    </div>
                    {{range .Students}}
                    <div class="profile__student-item" data-id="{{.ID}}">
                        <img class="profile__avatar-mini" src="{{.Avatar}}" alt="Аватар">
                        <div class="profile__user-name">{{.Name}}</div>
                        <div class="profile__menu-icon {{if .Selected}}active{{end}}"></div>
                    </div>
                    {{end}}
                </div>
            </div>

        </div>
    </section>
</main>

<footer class="footer"></footer>
</div>
<div id="custom-alert" class="custom-alert hidden"></div>
</body>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.5/jquery.inputmask.min.js"></script>
<script src="../../../scripts/admin_script.js"></script>


</html>