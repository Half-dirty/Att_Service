<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../../style/style.css">
    <link rel="stylesheet" href="../../../style/student/global.css">
    <link rel="stylesheet" href="../../../style/admin/global.css">
    <link rel="stylesheet" href="../../../style/student/applications.css">
    <title>Document</title>
</head>

<body data-id="{{.AppID}}">
    <div class="wrapper">
        <header class="header">
            <div class="header__container">
                <a class="header__logo" href="/">
                    <img class="header__logo-img" src="../../../pictures/logo.svg" alt="Logo" />
                    <div class="header__logo-text__container">
                        <h2 class="header__logo-text">–ê—Ç—Ç–µ—Å—Ç–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–æ–≤ —Ä—É—Å—Å–∫–æ–≥–æ –∂–µ—Å—Ç–æ–≤–æ–≥–æ —è–∑—ã–∫–∞</h2>
                    </div>
                </a>
                <input type="checkbox" id="menu-toggle" class="header__menu-toggle">
                <label for="menu-toggle" class="header__menu-icon">
                    <span></span>
                </label>

                <div class="header__profile">
                    <div class="header__profile-info">
                        <div class="header__status">
                            <h2>–°—Ç–∞—Ç—É—Å:</h2>
                            {{if or (eq .status "pending") (eq .status "")}}
                            <h2 class="header__status-text header__status-text--inactive">–ù–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω</h2>
                            <a href="#" class="header__status-button popup__link" name="aplication_form">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞
                                –ø—Ä–æ–≤–µ—Ä–∫—É</a>
                            {{end}}
                            {{if eq .status "declined"}}
                            <a href="#" class="header__status-button aproove_form" name="aproove_form">–û—Ç–∫–∞–∑</a>
                            <a href="#" class="header__status-button popup__link" name="aplication_form">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞
                                –ø—Ä–æ–≤–µ—Ä–∫—É</a>
                            {{end}}
                            {{if eq .status "approved"}}
                            <h2 class="header__status-text header__status-text--active">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω</h2>
                            {{end}}
                        </div>
                        <div class="header__role">
                            <h2>–†–æ–ª—å:</h2>
                            {{if eq .role "student"}}
                            <h2 class="header__role-text header__role-text--student">–ê—Ç—Ç–µ—Å—Ç—É–µ–º—ã–π</h2>
                            {{else if eq .role "examiner"}}
                            <h2 class="header__role-text header__role-text--examiner">–≠–∫–∑–∞–º–µ–Ω–∞—Ç–æ—Ä</h2>
                            {{end}}
                        </div>
                    </div>
                    <img class="header__profile-avatar"
                        src="{{if .avatar}}{{.avatar}}{{else}}../../../pictures/Generic avatar.png{{end}}"
                        alt="Profile Avatar">
                </div>
            </div>
        </header>

        <main class="main main--admin">
            <nav class="menu">
                <ul class="menu__list">
                    <!-- <li class="menu__item menu__item--active">
                        <a href="/admin/exam/students" class="menu__button">–ó–∞—è–≤–∫–∏ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω</a>
                    </li> -->
                    <li class="menu__item--back">
                        <a href="/admin/exam/students">–Ω–∞–∑–∞–¥</a>
                    </li>
                </ul>
            </nav>

            <section class="profile">
                <form class="profile__body" enctype="multipart/form-data">
                    <div class="profile__form">
                        <div class="profile__column">
                            <div class="profile__placeholder">
                                <label class="profile__label" for="native_language">–†–æ–¥–Ω–æ–π —è–∑—ã–∫:</label>
                                <input class="profile__input" type="text" name="native_language" id="native_language"
                                    value="{{.native_language}}" placeholder="">
                            </div>
                        </div>
                        <div class="profile__column">
                            <div class="profile__placeholder">
                                <label class="profile__label" for="citizenship">–ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ:</label>
                                <input class="profile__input" type="text" name="citizenship" id="citizenship"
                                    placeholder="" value="{{.citizenship}}">
                            </div>
                        </div>
                        <div class="profile__column">
                            <div class="profile__placeholder">
                                <label class="profile__label" for="marital_status">–°–µ–º–µ–π–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ:</label>
                                <input class="profile__input" type="text" name="marital_status" id="marital_status"
                                    value="{{.marital_status}}" placeholder="">
                            </div>
                        </div>
                        <div class="profile__column">
                            <label class="profile__label" for="organization">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è:</label>
                            <input class="profile__input" type="text" name="organization" id="organization"
                                value="{{.organization}}" placeholder="">
                        </div>
                        <div class="profile__column">
                            <div class="profile__placeholder">
                                <label class="profile__label" for="job_position">–ó–∞–Ω–∏–º–∞—è –¥–æ–ª–∂–Ω–æ—Å—Ç—å:</label>
                                <textarea class="profile__textarea profile__textarea-auto_expand" rows="1"
                                    oninput="adjustHeight(this)" name="job_position"
                                    id="job_position">{{.job_position}}</textarea>
                            </div>
                        </div>
                        <div class="profile__column">
                            <div class="profile__placeholder">
                                <label class="profile__label" for="requested_category">–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
                                    –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–∏:</label>
                                <select class="profile__selector" name="requested_category" id="requested_category">
                                    {{range .requested_category_list}}
                                    <option value="{{.Value}}" {{if .Selected}}selected{{end}}>{{.Text}}</option>
                                    {{end}}
                                </select>
                            </div>
                        </div>
                        <div class="profile__column">
                            <div class="profile__placeholder">
                                <label class="profile__label" for="basis_for_attestation">–û—Å–Ω–æ–≤–∞–Ω–∏–µ–º –¥–ª—è –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–∏ –Ω–∞
                                    —É–∫–∞–∑–∞–Ω–Ω—É—é –≤ –∑–∞—è–≤–ª–µ–Ω–∏–∏ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å—á–∏—Ç–∞—é —Å–ª–µ–¥—É—é—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                                    —Ä–∞–±–æ—Ç—ã:</label>
                                <textarea class="profile__textarea profile__textarea-auto_expand" rows="1"
                                    oninput="adjustHeight(this)" name="basis_for_attestation"
                                    id="basis_for_attestation">{{.basis_for_attestation}}</textarea>
                            </div>
                        </div>
                        <div class="profile__column">
                            <label class="profile__label" for="existing_category">–ò–º–µ—é—â–∞—è—Å—è –≤ –Ω–∞–ª–∏—á–∏–∏ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω–∞—è
                                –∫–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                            <textarea class="profile__textarea profile__textarea-auto_expand" rows="1"
                                oninput="adjustHeight(this)" name="existing_category"
                                id="existing_category">{{.existing_category}}</textarea>
                        </div>
                        <div class="profile__column">
                            <label class="profile__label" for="existing_category_term">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∏–º–µ—é—â–µ–π—Å—è
                                –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                            <textarea class="profile__textarea profile__textarea-auto_expand" rows="1"
                                oninput="adjustHeight(this)" name="existing_category_term"
                                id="existing_category_term">{{.existing_category_term}}</textarea>
                        </div>
                        <div class="profile__column">
                            <label class="profile__label" for="work_experience">–°—Ç–∞–∂ —Ä–∞–±–æ—Ç—ã (–ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏) –ø–æ–ª–Ω—ã—Ö
                                –ª–µ—Ç:</label>
                            <textarea class="profile__textarea profile__textarea-auto_expand" rows="1"
                                oninput="adjustHeight(this)" name="work_experience"
                                id="work_experience">{{.work_experience}}</textarea>
                        </div>
                        <div class="profile__column">
                            <label class="profile__label" for="current_position_experience">–°—Ç–∞–∂ —Ä–∞–±–æ—Ç—ã –≤ –Ω–∞—Å—Ç–æ—è—â–µ–π
                                –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª–Ω—ã—Ö –ª–µ—Ç:</label>
                            <textarea class="profile__textarea profile__textarea-auto_expand" rows="1"
                                oninput="adjustHeight(this)" name="current_position_experience"
                                id="current_position_experience">{{.current_position_experience}}</textarea>
                        </div>
                        <div class="profile__column">
                            <label class="profile__label" for="awards_info">–ù–∞–ª–∏—á–∏–µ –Ω–∞–≥—Ä–∞–¥, –∑–≤–∞–Ω–∏–π, —É—á—ë–Ω–æ–π —Å—Ç–µ–ø–µ–Ω–∏,
                                —É—á—ë–Ω–æ–≥–æ –∑–≤–∞–Ω–∏—è:</label>
                            <textarea class="profile__textarea profile__textarea-auto_expand" rows="1"
                                oninput="adjustHeight(this)" name="awards_info"
                                id="awards_info">{{.awards_info}}</textarea>
                        </div>
                        <div class="profile__column">
                            <label class="profile__label" for="training_info">–°–≤–µ–¥–µ–Ω–∏—è –æ –ø–æ–≤—ã—à–µ–Ω–∏–∏ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏:</label>
                            <textarea class="profile__textarea profile__textarea-auto_expand" rows="1"
                                oninput="adjustHeight(this)" name="training_info"
                                id="training_info">{{.training_info}}</textarea>
                        </div>
                        <div class="profile__column">
                            <label class="profile__label" for="memberships">–ß–ª–µ–Ω—Å—Ç–≤–æ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è—Ö:</label>
                            <textarea class="profile__textarea profile__textarea-auto_expand" rows="1"
                                oninput="adjustHeight(this)" name="memberships"
                                id="memberships">{{.memberships}}</textarea>
                        </div>
                    </div>
                    <div class="profile__row">
                        <div class="profile__scan">
                            <label class="profile__label" for="scan_diploma">–°–∫–∞–Ω –¥–∏–ø–ª–æ–º–∞ –æ–± –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏:</label>
                            <div class="uploadContainer profile__scan--input">
                                <input type="file" name="diplom_img" id="scan_diploma" accept="image/*" hidden
                                    class="scan__input" data-id="diplom_img" multiple>
                                <div id="diplom_img" name="diplom_img" class="image-preview">
                                    {{range .diplom_images}}
                                    <img src="{{.}}" alt="–î–∏–ø–ª–æ–º">
                                    {{end}}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile__row">
                        <div class="profile__scan">
                            <label class="profile__label" for="scan_diploma_znii">–°–∫–∞–Ω –¥–∏–ø–ª–æ–º–∞ –æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –ø–æ –∂–µ—Å—Ç–æ–≤–æ–º—É
                                —è–∑—ã–∫—É:</label>
                            <div class="uploadContainer profile__scan--input">
                                <input type="file" name="diplom_znii_img" id="scan_diploma_znii" accept="image/*" hidden
                                    class="scan__input" data-id="diplom_znii_img" multiple>
                                <div id="diplom_znii_img" name="diplom_znii_img" class="image-preview">
                                    {{range .diplom_jest_images}}
                                    <img src="{{.}}" alt="–î–∏–ø–ª–æ–º –ñ–µ—Å—Ç–æ–≤—ã–π">
                                    {{end}}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile__row">
                        <div class="profile__scan">
                            <label class="profile__label" for="passport_all">–°–∫–∞–Ω—ã –ø–∞—Å–ø–æ—Ä—Ç–∞:</label>
                            <div class="uploadContainer profile__scan--input">
                                <input type="file" name="passport_all" id="passport_all" accept="image/*" hidden
                                    class="scan__input" multiple data-id="passport_all_preview">
                                <div id="passport_all_preview" class="image-preview">
                                    {{range .passport_images}}
                                    <img src="{{.}}" alt="–ü–∞—Å–ø–æ—Ä—Ç">
                                    {{end}}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile__row">
                        <div class="profile__scan">
                            <label class="profile__label" for="tk_book">–°–∫–∞–Ω—ã —Ç—Ä—É–¥–æ–≤–æ–π –∫–Ω–∏–∂–∫–∏:</label>
                            <div class="uploadContainer profile__scan--input">
                                <input type="file" name="tk_book" id="tk_book" accept="image/*" hidden
                                    class="scan__input" multiple data-id="tk_book_preview">
                                <div id="tk_book_preview" class="image-preview">
                                    {{range .tk_book_images}}
                                    <img src="{{.}}" alt="—Ç—Ä—É–¥–æ–≤–∞—è –∫–Ω–∏–∂–∫–∞">
                                    {{end}}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile__row">
                        <div class="profile__scan">
                            <label class="profile__label" for="characteristic">–°–∫–∞–Ω —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:</label>
                            <div class="uploadContainer profile__scan--input">
                                <input type="file" name="characteristic" id="characteristic" accept="image/*" hidden
                                    class="scan__input" multiple data-id="characteristic">
                                <div id="characteristic" class="image-preview">
                                    {{range .characteristic_images}}
                                    <img src="{{.}}" alt="—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞">
                                    {{end}}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile__row">
                        <div class="profile__confirm">
                            <label class="profile__confirm-label" for="memberships">–°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–∞—à–∏—Ö
                                –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö
                                –¥–∞–Ω–Ω—ã—Ö:</label>
                            <input type="checkbox" name="consent" value="true" {{if .consent}}checked{{end}}>
                        </div>
                        <div class="profile__agree">
                            <button type="button" class="profile__agree-button" id="agree_application">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                                –∑–∞—è–≤–ª–µ–Ω–∏–µ</button>
                            <button type="button" class="profile__decline-button"
                                id="decline_application_button">–û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–ª–µ–Ω–∏–µ</button>
                        </div>
                    </div>
                </form>
            </section>
        </main>


        <footer class="footer"></footer>
    </div>
    <div id="custom-alert" class="custom-alert hidden"></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.5/jquery.inputmask.min.js"></script>
    <script src="../../../scripts/student_script.js"></script>
    <script src="../../../scripts/admin_script.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.querySelectorAll("input, textarea, select").forEach(el => {
                if (el.type === "file") {
                    el.disabled = true;
                } else if (el.tagName === "SELECT") {
                    el.disabled = true;
                } else if (el.type === "checkbox" || el.type === "radio") {
                    el.disabled = true;
                } else {
                    el.readOnly = true;
                }
            });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.querySelectorAll("input, textarea, select").forEach(el => {
                if (el.type === "file") {
                    el.disabled = true;
                } else if (el.tagName === "SELECT") {
                    el.disabled = true;
                } else if (el.type === "checkbox" || el.type === "radio") {
                    el.disabled = true;
                } else {
                    el.readOnly = true;
                }
            });

            // üî• –ù–æ–≤—ã–π –∫–æ–¥: –∫–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–∏–Ω–∫–µ ‚Äî —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
            document.querySelectorAll(".image-preview img").forEach(img => {
                img.style.cursor = "pointer";
                img.addEventListener("click", () => {
                    const link = document.createElement('a');
                    link.href = img.src;
                    link.download = img.alt || "document"; // –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
                    link.target = "_blank";
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                });
            });
        });
    </script>
    <script>
        $(document).ready(function () {
            const appID = $('body').data('id');

            const postRequest = (url, data, successRedirect) => {
                if (!appID) {
                    alert("–û—à–∏–±–∫–∞: ID –∑–∞—è–≤–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω");
                    return;
                }

                $.ajax({
                    type: "POST",
                    url: url,
                    contentType: "application/json",
                    data: JSON.stringify(data),
                    success: function (res) {
                        if (res.success) {
                            window.location.href = successRedirect;
                        } else {
                            alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞");
                        }
                    },
                    error: function (xhr) {
                        alert("–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: " + (xhr.responseText || xhr.statusText));
                    }
                });
            };
        });
        $('#decline_application_button').on('click', function (e) {
            e.preventDefault();
            openModal("decline_application_modal");
        });
        $(document).on('submit', '#decline_application-form', function (e) {
            e.preventDefault();  // –û—Ç–º–µ–Ω—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã

            // –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
            if ($('.popup__send').hasClass('popup__send--disabled')) return;

            const reasons = [];
            // –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–∫–∞–∑–∞
            $('input[name="reason"]:checked').each(function () {
                reasons.push($(this).val());
            });

            const explanation = $('textarea[name="explanation"]').val();
            const appID = $('body').data('id');

            if (!appID) {
                alert("–û—à–∏–±–∫–∞: –Ω–µ –Ω–∞–π–¥–µ–Ω ID –∑–∞—è–≤–ª–µ–Ω–∏—è");
                return;
            }

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            apiPost("/admin/api/application/decline", { id: appID, reasons, explanation })
                .done(() => window.location.href = "/admin/exam/students")  // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞
                .fail(xhr => alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ: " + xhr.responseText));  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        });
        const adminModals = {
            decline_form: `
    <div id="decline_form" class="popup">
        <div class="popup__body">
            <div class="popup__content">
                <div class="popup__header">
                    <a href="#" class="popup__close close-popup"><span></span></a>
                    <h2 class="popup__title">–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –æ—Ç–∫–∞–∑–∞:</h2>
                </div>
                <form id="decline-forma">
                    <label><input type="checkbox" name="reason" value="invalid_name"> –ù–µ–≤–µ—Ä–Ω–æ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –§–ò–û</label>
                    <label><input type="checkbox" name="reason" value="invalid_contacts"> –ù–µ–≤–µ—Ä–Ω–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã</label>
                    <label><input type="checkbox" name="reason" value="no_documents"> –ù–µ –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</label>
                    <textarea name="explanation" placeholder="–ü–æ—è—Å–Ω–µ–Ω–∏–µ"></textarea>
                    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </form>
            </div>
        </div>
    </div>`,
            decline_application_modal: `
<div id="decline_application_modal" class="popup">
    <div class="popup__body">
        <div class="popup__content">
            <div class="popup__header">
                <a href="#" class="popup__close close-popup"><span></span></a>
                <h2 class="popup__title">–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –æ—Ç–∫–∞–∑–∞:</h2>
            </div>
            <form id="decline_application-form" class="popup__form">
                <div class="popup__checker">
                    <div class="popup__list">
                        <label class="popup__item">
                            <input type="checkbox" name="reason" value="invalid_name"> –ù–µ–≤–µ—Ä–Ω–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                        </label>
                        <label class="popup__item">
                            <input type="checkbox" name="reason" value="invalid_contacts"> –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–æ—Ç–æ
                        </label>
                        <label class="popup__item">
                            <input type="checkbox" name="reason" value="no_documents"> –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã –Ω–µ –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
                        </label>
                        <div class="popup__textarea">
                            <textarea placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –ø–æ—è—Å–Ω–µ–Ω–∏–µ" name="explanation"></textarea>
                        </div>
                    </div>
                    <div class="popup__send popup__send">
                        <button type="submit" class="">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
`,

            'start-exam': `
<div id="start-exam" class="popup">
    <div class="popup__body">
        <div class="popup__content">
            <div class="popup__header">
                <a href="#" class="popup__close close-popup"><span></span></a>
                <h2 class="popup__title">–≠–∫–∑–∞–º–µ–Ω–∞—Ç–æ—Ä—ã –ø–æ–¥–∫–ª—é—á–∏–≤—à–∏–µ—Å—è –∫ —ç–∫–∑–∞–º–µ–Ω—É:</h2>
            </div>
            <div class="popup__form">
                <div class="popup__examiner-list" id="examiner_list">
                    <!-- —Å—é–¥–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–∏–º —ç–∫–∑–∞–º–µ–Ω–∞—Ç–æ—Ä–æ–≤ -->
                </div>
                <div class="popup__start">
                    <button type="button" id="start_exam_confirm">–ù–∞—á–∞—Ç—å —ç–∫–∑–∞–º–µ–Ω</button>
                </div>
            </div>
        </div>
    </div>
</div>`,

        };
        const apiPost = (url, data) => {
            return $.ajax({
                type: 'POST',
                url,
                contentType: 'application/json',
                data: JSON.stringify(data),
            });
        };

        $('#agree_application').on('click', function (e) {
            e.preventDefault();

            const appID = $('body').data('id');

            if (!appID) {
                alert("–û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å ID –∑–∞—è–≤–ª–µ–Ω–∏—è");
                return;
            }

            $.ajax({
                url: '/admin/api/application/approve',
                method: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({ id: appID }),
                success: function (response) {
                    window.location.href = "/admin/exam/students";
                },
                error: function (xhr) {
                    alert("–û—à–∏–±–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: " + xhr.responseText);
                }
            });
        });

        function openModal(name) {
            const modalTemplate = adminModals[name];  // –ü–æ–ª—É—á–∞–µ–º —à–∞–±–ª–æ–Ω –º–æ–¥–∞–ª–∫–∏
            if (!modalTemplate) {
                console.error("–ú–æ–¥–∞–ª–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:", name);
                return;
            }

            // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –º–æ–¥–∞–ª–∫—É, –µ—Å–ª–∏ —Ç–∞–∫–∞—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
            $('.popup#' + name).remove();
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –º–æ–¥–∞–ª–∫—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            $('.wrapper').append(modalTemplate);

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–¥–∞–ª–∫–∏
            $('#' + name).addClass('popup__open');
            $('body').addClass('modal');

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏ –ø–æ –∫—Ä–µ—Å—Ç–∏–∫—É
            $('#' + name).find('.popup__close').on('click', function (e) {
                e.preventDefault();
                closeModal(name);
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª–∫–∏
            $(document).on('click.modal', `#${name}`, function (e) {
                if (!$(e.target).closest('.popup__content').length) {
                    closeModal(name);
                }
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∞–≤–∏—à–µ Escape
            $(document).on('keydown.modal', function (e) {
                if (e.key === 'Escape') {
                    closeModal(name);
                }
            });
        }


        function closeModal(name) {
            $('.popup#' + name).remove(); // ‚ùó –¢–æ–∂–µ —É–¥–∞–ª—è–µ–º —Ç–æ–ª—å–∫–æ popup –ø–æ id
            $('body').removeClass('modal');
            $(document).off('click.modal');
            $(document).off('keydown.modal');
        }
    </script>

</body>

</html>